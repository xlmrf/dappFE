const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C2wCgOwX.js","./I0J7D7wH.js","./DOvt5s4i.js","./Ckh0oh2P.js","./chunk-pg-(ranking).BvAF5Vr6.css","./Bf6kWBt7.js","./chunk-pg-settings.BZxPkVe1.css","./3EwUDpM_.js","./Cy19EL0k.js","./mIYJAZJv.js","./DbAjghP6.js","./DVjZi4si.js"])))=>i.map(i=>d[i]);
import{d as W,m as G,be as O,bf as H,bg as B,h as R,p as j,s as g,H as le,o as b,c as P,l as t,w as S,bj as K,g as e,a as y,t as x,b as D,b8 as M,a_ as V,a$ as z,a2 as Q,ah as ve,r as ie,_ as _e,bm as he,bp as ye,E as ae,ae as ke,aT as X,e as F,ab as Se,aK as N,aE as Ee,al as xe,y as oe,B as se,z as $e}from"./I0J7D7wH.js";import{i as J,u as Ae,_ as Ce,a as Re}from"./C2wCgOwX.js";import{a as Z,b as Y,e as ne,D as ee,A as De}from"./DOvt5s4i.js";import{_ as re}from"./DbAjghP6.js";import{_ as Ve,a as ze}from"./DVn50zcn.js";import"./3EwUDpM_.js";import"./Bf6kWBt7.js";import"./Ckh0oh2P.js";import"./Cy19EL0k.js";import"./mIYJAZJv.js";import"./DVjZi4si.js";const Fe={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},Le={class:"tw-my-5 tw-uppercase tw-text-center body-b1"},Ie={class:"tw-flex tw-flex-col sm:tw-flex-row tw-gap-3.5"},Te=W({__name:"LoginForm",emits:["forgot-password","email-confirm-required","wallet"],setup(L,{emit:k}){const a=k,{t:o}=G(),{handleSubmit:p,errors:$,values:m,isSubmitting:l}=O({validationSchema:H({email:B().required(o("form.enterYourX",{field:"form.emailAddress"})).email(),password:B().required(o("form.enterYourX",{field:"form.password"}))})}),v=R(()=>!m.email||!m.password||!J($.value)),i=j(),{getErrorMessage:d}=Z(),c=g(null),{login:C,makeUserLoggedIn:A}=Y(),n=p(async I=>{try{const u=await C(I);await A(u.access_token),i.toggleAuthDialog(void 0,!1)}catch(u){const{errorCode:T}=u;T[0]===ne.E_EMAIL_CONFIRMATION_REQUIRED?a("email-confirm-required",I.email):(console.error(u),c.value=d(T))}});le(m,()=>{c.value&&(c.value=null)});function s(){a("forgot-password")}function r(){a("wallet")}const{googleLogin:f}=Y(),_=g(!1),h=async()=>{_.value=!0;try{await f()}finally{_.value=!1}};return(I,u)=>(b(),P("form",{onSubmit:u[0]||(u[0]=Q((...T)=>e(n)&&e(n)(...T),["prevent"]))},[t(ee,null,{default:S(()=>[t(K,{id:"email",placeholder:e(o)("form.enterYourX",{field:"form.emailAddress"}),type:"email","is-error":!!c.value,label:e(o)("form.email"),class:"tw-w-full"},null,8,["placeholder","is-error","label"]),t(re,{id:"password",placeholder:e(o)("form.enterYourX",{field:"form.password"}),label:e(o)("form.password"),"is-error":!!c.value,"input-class":"tw-w-full"},{"append-label":S(()=>[y("button",{type:"button",class:"tw-text-300 tw-leading-400 tw-font-semibold tw-text-primary-300 tw-ml-auto",onClick:s},x(e(o)("common.buttons.forgotPassword")),1)]),_:1},8,["placeholder","label","is-error"]),c.value?(b(),P("div",Fe,x(c.value),1)):D("",!0)]),_:1}),t(z,{type:"submit",variant:e(M).confirm,size:e(V).medium,label:e(o)("common.buttons.logIn"),disabled:e(v),loading:e(l),class:"tw-w-full tw-mt-10"},null,8,["variant","size","label","disabled","loading"]),y("div",Le,x(e(o)("common.or")),1),y("div",Ie,[t(z,{size:e(V).medium,label:e(o)("common.google"),loading:_.value,icon:"google",class:"tw-w-full","icon-class":"tw-mr-2.5",onClick:h},null,8,["size","label","loading"]),t(z,{size:e(V).medium,label:e(o)("common.wallet"),icon:"wallet",class:"tw-w-full","icon-class":"tw-mr-2.5 tw-text-accent-500",onClick:r},null,8,["size","label"])])],32))}}),Ue={class:"heading-h2 tw-mb-4"},Pe={class:"body-b1 tw-text-primary-200 tw-mb-7.5"},Xe={class:"tw-flex tw-flex-col tw-gap-5 tw-mt-10"},qe=W({__name:"ForgotPasswordForm",emits:["back-to-login","forgot-password"],setup(L,{emit:k}){const a=k,{t:o}=G(),{handleSubmit:p,errors:$,values:m,isSubmitting:l}=O({validationSchema:H({email:B().required(o("form.enterYourX",{field:"form.emailAddress"})).email()})}),v=()=>{a("back-to-login")},{recoveryPassword:i}=Y(),d=p(async n=>{await i({email:n.email,"g-recaptcha-response":window.grecaptcha.getResponse()}),a("forgot-password",n.email)}),{captchaResponseToken:c,onVerifyCallback:C}=Ae(),A=R(()=>!m.email||!J($.value)||!c.value);return(n,s)=>(b(),P("div",null,[y("h1",Ue,x(n.$t("auth.forgotPasswordDialog.title")),1),y("p",Pe,x(n.$t("auth.forgotPasswordDialog.text")),1),y("form",{onSubmit:s[0]||(s[0]=Q((...r)=>e(d)&&e(d)(...r),["prevent"]))},[t(K,{id:"email",placeholder:n.$t("form.enterYourX",{field:"form.emailAddress"}),type:"email",label:n.$t("form.emailAddress"),class:"tw-w-full"},null,8,["placeholder","label"]),t(Ce,{onVerifyCallback:e(C)},null,8,["onVerifyCallback"]),y("div",Xe,[t(z,{type:"submit",variant:e(M).confirm,size:e(V).medium,disabled:e(A),loading:e(l),label:n.$t("common.buttons.sendInstructions"),class:"tw-w-full"},null,8,["variant","size","disabled","loading","label"]),t(z,{variant:e(M).text,size:e(V).medium,label:n.$t("common.buttons.backToX",{field:"common.buttons.logIn"}),onClick:v},null,8,["variant","size","label"])])],32)]))}}),ce=()=>{const{$customFetch:L}=ve(),k=De(L),a=async l=>await k.signUp(l),{getErrorMessage:o}=Z(),{makeUserLoggedIn:p}=Y();return{signUp:a,confirmRegistration:async l=>{try{const v=await k.confirmRegistration(l);await p(v.access_token)}catch(v){console.error(v);const{errorCode:i}=v;throw o(i)}},resendVerificationEmail:async l=>await k.resendVerificationEmail({email:l})}},Be={class:"tw-bg-primary-600 tw-p-4 tw-rounded-full tw-w-1600 tw-h-1600 tw-mx-auto"},Me={class:"tw-my-7.5"},Ye={class:"heading-h2 tw-text-center tw-mb-4"},We={class:"tw-text-accent-500 tw-font-bold"},Ge={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},Ne=W({__name:"SignupVerification",props:{email:{},password:{}},emits:["verification-success"],setup(L,{emit:k}){const a=L,o=g(!1),{confirmRegistration:p,resendVerificationEmail:$}=ce(),m=j(),l=g(null),v=k,i=async r=>{o.value=!0;try{await p({email:a.email,verify_code:r}),v("verification-success"),m.toggleAuthDialog(void 0,!1)}catch(f){l.value=f}finally{o.value=!1}},d=g(!0),c=g(null),C=async r=>{d.value=!d.value,await i(r)},A=g(null),n=g(!1),s=async()=>{var r,f;if(c.value){n.value=!0;try{await $(a.email),(r=A.value)==null||r.reset(),(f=c.value)==null||f.clear(),l.value=null}finally{n.value=!1}}};return(r,f)=>{const _=ie("i18n-t");return b(),P("div",null,[y("div",Be,[t(_e,{name:"mail",class:"tw-text-accent-500 tw-w-800 tw-h-800"})]),y("div",Me,[y("h1",Ye,x(r.$t("auth.emailVerificationDialog.title")),1),t(_,{keypath:"auth.emailVerificationDialog.text",tag:"p",class:"tw-text-center tw-text-primary-200 body-b1",scope:"global"},{email:S(()=>[y("span",We,x(r.email),1)]),_:1})]),t(ee,{class:"tw-mb-7.5"},{default:S(()=>[t(Ve,{ref_key:"verifCode",ref:c,"is-error":!!l.value,onComplete:C},null,8,["is-error"]),l.value?(b(),P("div",Ge,x(l.value),1)):D("",!0)]),_:1}),t(ze,{ref_key:"resendEmailRef",ref:A,"is-loading":n.value,class:"tw-mb-7.5",onResend:s},null,8,["is-loading"]),t(z,{variant:e(M).confirm,size:e(V).medium,label:r.$t("common.buttons.next"),loading:o.value,disabled:d.value,class:"tw-w-full",onClick:i},null,8,["variant","size","label","loading","disabled"])])}}}),Oe={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},He={class:"tw-my-5 tw-uppercase tw-text-center body-b1"},je={class:"tw-flex tw-flex-col sm:tw-flex-row tw-gap-3.5"},Ke={class:"tw-mt-7.5 tw-text-300 tw-leading-400 tw-text-primary-300 tw-text-center tw-px-10"},Qe=W({__name:"SignupForm",emits:["submit","wallet","email-already-registered"],setup(L,{emit:k}){const{t:a}=G(),o=k,{handleSubmit:p,errors:$,values:m,isSubmitting:l}=O({validationSchema:H({email:B().required(a("form.enterYourX",{field:"form.emailAddress"})).email(),password:B().required(a("form.enterYourX",{field:"form.password"})).matches(he,a("form.rules.passwordStrengthValidation"))})}),{signUp:v}=ce(),i=g(null),{getErrorMessage:d}=Z();le(m,()=>{i.value&&(i.value=null)});const c=p(async f=>{try{await v(f),o("submit",f.email,f.password)}catch(_){console.error(_);const{errorCode:h}=_;h[0]===ne.E_EMAIL_ALREADY_REGISTERED?o("email-already-registered"):i.value=d(h)}}),C=R(()=>!m.email||!m.password||!J($.value)),A=()=>{o("wallet")},{googleLogin:n}=Y(),s=g(!1),r=async()=>{s.value=!0;try{await n()}finally{s.value=!1}};return(f,_)=>{const h=ke,I=ie("i18n-t");return b(),P("form",{onSubmit:_[0]||(_[0]=Q((...u)=>e(c)&&e(c)(...u),["prevent"]))},[t(ee,null,{default:S(()=>[t(K,{id:"email",placeholder:e(a)("form.enterYourX",{field:"form.emailAddress"}),type:"email",label:e(a)("form.email"),"is-error":!!i.value,class:"tw-w-full"},null,8,["placeholder","label","is-error"]),t(re,{id:"password",placeholder:f.$t("form.enterYourX",{field:"form.password"}),label:e(a)("form.password"),"is-error":!!i.value,"input-class":"tw-w-full"},null,8,["placeholder","label","is-error"]),t(ye,{value:!0,label:e(a)("terms.marketingUpdatesAgreement"),name:"isMarketingUpdatesAccepted","input-id":"marketingUpdates",binary:""},null,8,["label"]),i.value?(b(),P("div",Oe,x(i.value),1)):D("",!0)]),_:1}),t(z,{type:"submit",variant:e(M).confirm,size:e(V).medium,disabled:e(C),loading:e(l),label:e(a)("common.buttons.createAccount"),class:"tw-w-full tw-mt-10"},null,8,["variant","size","disabled","loading","label"]),y("div",He,x(e(a)("common.or")),1),y("div",je,[t(z,{size:e(V).medium,label:e(a)("common.google"),loading:s.value,icon:"google",class:"tw-w-full","icon-class":"tw-mr-2.5",onClick:r},null,8,["size","label","loading"]),t(z,{size:e(V).medium,label:e(a)("common.wallet"),icon:"wallet",class:"tw-w-full","icon-class":"tw-mr-2.5 tw-text-accent-500",onClick:A},null,8,["size","label"])]),y("div",Ke,[t(I,{keypath:"terms.agreement",scope:"global"},{termsLink:S(()=>[t(h,{to:"/terms-conditions",target:"_blank",class:"tw-border-b tw-font-semibold"},{default:S(()=>[ae(x(e(a)("terms.termsOfUse")),1)]),_:1})]),privacyLink:S(()=>[t(h,{to:"/privacy-policy",target:"_blank",class:"tw-border-b tw-font-semibold"},{default:S(()=>[ae(x(e(a)("terms.privacy.title")),1)]),_:1})]),_:1})])],32)}}}),ct=W({__name:"AuthDialog",emits:["inactive-wallet","wallet-bound","forgot-password","verification-success","email-confirm-required"],setup(L,{emit:k}){const a=oe(()=>se(()=>import("./C2wCgOwX.js").then(w=>w.e),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),o=oe(()=>se(()=>import("./DbAjghP6.js").then(w=>w.a),__vite__mapDeps([10,0,1,2,3,4,5,6,7,8,9,11]),import.meta.url)),p=k,{t:$}=G(),m=[{id:X.login,label:$("common.buttons.logIn")},{id:X.signUp,label:$("common.buttons.signUp")}],l=w=>m.findIndex(E=>E.id===w),v=R(()=>!h.value&&!u.value&&!s.value),i=j(),d=R({get(){return l(i.authDialog.activeTab)||0},set(w){i.toggleAuthDialog(m[w].id,!0)}}),c=R(()=>d.value===l(X.login)),C=R(()=>d.value===l(X.signUp)),A=R(()=>c.value&&!s.value&&!h.value&&!u.value),n=R(()=>C.value&&!s.value&&!h.value&&!u.value),s=g(!1),r=()=>{s.value=!s.value},f=g(""),_=g(""),h=g(!1),I=(w,E)=>{h.value=!0,f.value=w,_.value=E},u=g(!1),T=()=>{u.value=!u.value},ue=()=>{u.value=!1,h.value=!1,s.value=!1},te=()=>{s.value=!1,i.toggleAuthDialog(X.login,!0),u.value=!1},me=()=>{p("inactive-wallet")},de=(w,E)=>{p("wallet-bound",w,E)},fe=w=>{p("forgot-password",w)},q=g(!1),we=()=>{q.value=!0},ge=()=>{p("verification-success")};function pe(w){p("email-confirm-required",w)}return(w,E)=>{const be=$e;return b(),F(Re,{class:"md:tw-min-h-3200",onAfterHide:ue},{default:S(()=>[e(v)?(b(),F(Se,{key:0,modelValue:e(d),"onUpdate:modelValue":E[0]||(E[0]=U=>N(d)?d.value=U:null),model:m,"action-class":U=>U.id===e(X).signUp?"tw-capitalize":void 0,"menu-class":"tw-justify-center",class:"tw-mb-10"},null,8,["modelValue","action-class"])):D("",!0),e(A)?(b(),F(Te,{key:1,onForgotPassword:r,onWallet:T,onEmailConfirmRequired:pe})):e(n)?(b(),F(Qe,{key:2,onSubmit:I,onWallet:T,onEmailAlreadyRegistered:we})):D("",!0),e(q)?(b(),F(e(o),{key:3,visible:e(q),"onUpdate:visible":E[1]||(E[1]=U=>N(q)?q.value=U:null)},null,8,["visible"])):D("",!0),t(be,null,{default:S(()=>[e(u)?(b(),F(Ee,{key:0},{fallback:S(()=>[t(xe)]),default:S(()=>[t(e(a),{onBackToLogin:te,onForgotPassword:r,onInactiveWallet:me,onWalletBound:de})]),_:1})):D("",!0)]),_:1}),e(s)?(b(),F(qe,{key:4,visible:e(s),"onUpdate:visible":E[2]||(E[2]=U=>N(s)?s.value=U:null),onForgotPassword:fe,onBackToLogin:te},null,8,["visible"])):D("",!0),e(h)?(b(),F(Ne,{key:5,email:e(f),password:e(_),onVerificationSuccess:ge},null,8,["email","password"])):D("",!0)]),_:1})}}});export{ct as default};

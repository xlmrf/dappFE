import{bl as X,d as N,m as j,be as O,bf as P,bg as F,bm as R,s as h,h as T,o as p,c as y,a as s,l,_ as S,t as w,w as z,bj as E,g as e,b as C,b8 as A,a_ as D,a$ as I,a2 as Y,e as G,b9 as q}from"./I0J7D7wH.js";import{u as W,D as M}from"./DOvt5s4i.js";import{_ as H}from"./DbAjghP6.js";import{i as L}from"./C2wCgOwX.js";import"./Ckh0oh2P.js";import"./Bf6kWBt7.js";import"./DVjZi4si.js";import"./3EwUDpM_.js";import"./Cy19EL0k.js";import"./mIYJAZJv.js";const U=X("/images/logos/logo-static.png"),x={class:"heading-h2 tw-text-center tw-mb-7.5"},J={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},K=N({__name:"WalletBindAccountForm",props:{address:{},signature:{},walletType:{}},emits:["back","forgot-password","wallet-bound"],setup(v,{emit:$}){const o=v,u=$,i=()=>{u("back")},{t:c}=j(),{handleSubmit:n,errors:b,values:d,isSubmitting:k}=O({validationSchema:P({email:F().required(c("form.enterYourX",{field:"form.emailAddress"})).email(),password:F().required(c("form.enterYourX",{field:"form.password"})).matches(R,c("form.rules.passwordStrengthValidation"))})}),_=h(!1),{bindWalletToExistingAccount:B}=W(),r=h(""),f=n(async a=>{_.value=!0;try{await B({walletType:o.walletType,address:o.address,signature:o.signature,email:a.email,password:a.password}),u("wallet-bound",o.address,a.email)}catch(g){r.value=g}}),t=T(()=>!d.email||!d.password||d.password.length<8||!L(b.value)),m=()=>{i(),u("forgot-password")};return(a,g)=>(p(),y("div",null,[s("button",{class:"tw-absolute tw-top-5 tw-left-5",onClick:i},[l(S,{name:"arrow-left",class:"tw-w-600 tw-h-600 tw-text-primary-400"})]),s("form",{onSubmit:g[0]||(g[0]=Y((...V)=>e(f)&&e(f)(...V),["prevent"]))},[s("h1",x,w(a.$t("auth.wallet.bindingForm.title")),1),l(M,null,{default:z(()=>[l(E,{id:"walletId",disabled:"",label:a.$t("auth.wallet.walletAddress"),class:"tw-w-full",value:a.address},null,8,["label","value"]),l(E,{id:"email",label:a.$t("form.emailAddress"),"is-error":!!e(r),placeholder:a.$t("form.enterYourX",{field:"form.emailAddress"}),class:"tw-w-full"},null,8,["label","is-error","placeholder"]),l(H,{id:"password",placeholder:a.$t("form.enterYourX",{field:"form.password"}),label:a.$t("form.password"),"is-error":!!e(r),"input-class":"tw-w-full"},{"append-label":z(()=>[s("button",{type:"button",class:"tw-text-300 tw-leading-400 tw-font-semibold tw-text-primary-300 tw-ml-auto",onClick:m},w(a.$t("common.buttons.forgotPassword")),1)]),_:1},8,["placeholder","label","is-error"]),e(r)?(p(),y("div",J,w(e(r)),1)):C("",!0)]),_:1}),l(I,{type:"submit",variant:e(A).confirm,size:e(D).medium,label:a.$t("common.buttons.bindNow"),loading:e(k),disabled:e(t),class:"tw-w-full tw-mt-10"},null,8,["variant","size","label","loading","disabled"])],32)]))}}),Q={key:1},Z={class:"tw-flex tw-items-center tw-justify-center tw-gap-2.5 tw-mb-7.5"},tt=["src","alt"],et={class:"tw-text-center body-b1 tw-text-primary-200 tw-mb-7.5"},at={class:"heading-h2 tw-text-primary-50 tw-mb-4"},st={class:"tw-mb-4"},pt=N({__name:"WalletBindAccount",props:{walletId:{},address:{},signature:{}},emits:["back","forgot-password","inactive-wallet","wallet-bound"],setup(v,{emit:$}){const o=v,u=T(()=>`/images/wallets/${o.walletId.split("_").join("")}.svg`),i=$,c=()=>{i("back")},n=h(!1),b=h(!0),d=()=>{n.value=!n.value},k=()=>{d()},_=()=>{n.value=!1,b.value=!1,i("forgot-password")},{registerByWallet:B}=W(),r=()=>{B({walletType:o.walletId,address:o.address,signature:o.signature})},f=(t,m)=>{i("wallet-bound",t,m)};return(t,m)=>n.value?(p(),G(K,{key:0,"wallet-type":t.walletId,address:t.address,signature:t.signature,onBack:d,onWalletBound:f,onForgotPassword:_},null,8,["wallet-type","address","signature"])):b.value?(p(),y("div",Q,[s("button",{class:"tw-absolute tw-top-5 tw-left-5",onClick:c},[l(S,{name:"arrow-left",class:"tw-w-600 tw-h-600 tw-text-primary-400"})]),s("div",Z,[t.walletId?(p(),y("img",{key:0,src:u.value,alt:`${t.walletId} logo`,width:60,height:60},null,8,tt)):C("",!0),l(S,{name:"arrow-right-left",class:"tw-w-600 tw-h-600 tw-text-primary-400"}),m[0]||(m[0]=s("div",{class:"tw-bg-primary-700 tw-w-1500 tw-h-1500 tw-rounded-full tw-flex tw-items-center tw-justify-center"},[s("img",{src:U,alt:"Dapp main logo",width:36,height:36})],-1))]),s("div",et,[s("h1",at,w(t.$t("auth.wallet.bindingDialog.title")),1),s("p",st,w(t.$t("auth.wallet.bindingDialog.text")),1),s("p",null,w(t.$t("auth.wallet.bindingDialog.note")),1)]),l(I,{variant:e(A).confirm,size:e(D).medium,label:t.$t("auth.wallet.bindingDialog.buttons.submit"),class:"tw-w-full tw-mb-3.5",onClick:k},null,8,["variant","size","label"]),l(I,{type:"button",category:e(q).secondary,variant:e(A).confirm,size:e(D).medium,label:t.$t("auth.wallet.bindingDialog.buttons.cancel"),class:"tw-w-full",onClick:r},null,8,["category","variant","size","label"])])):C("",!0)}});export{pt as default};

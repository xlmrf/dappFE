const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cpn-_-_c.js","./C2wCgOwX.js","./I0J7D7wH.js","./DOvt5s4i.js","./Ckh0oh2P.js","./chunk-pg-(ranking).BvAF5Vr6.css","./Bf6kWBt7.js","./chunk-pg-settings.BZxPkVe1.css","./3EwUDpM_.js","./Cy19EL0k.js","./mIYJAZJv.js"])))=>i.map(i=>d[i]);
import{bD as Z,d as R,s as r,a9 as ee,aa as te,h as q,o as g,c as k,t as S,e as z,g as d,b8 as B,a_ as N,a$ as j,a6 as ae,bE as se,bF as ne,F as L,G as le,n as oe,i as ie,m as M,q as re,r as H,a as I,l as C,_ as K,w as W,b as X,a1 as ce,X as ue,y as P,B as A,ah as de}from"./I0J7D7wH.js";import{a as me,U as fe}from"./C2wCgOwX.js";import{u as T,a as pe,m as Y}from"./DOvt5s4i.js";const ve=Z,_e={key:0,class:"body-b1 tw-text-center tw-text-primary-300 tw-leading-550 tw-py-2"},G=R({__name:"VerificationResendEmail",props:{isLoading:{type:Boolean,default:!1}},emits:["resend"],setup(h,{expose:b,emit:m}){const n=ve,c=ae(),s=r(n),e=r(c().add(n,"millisecond")),o=()=>{s.value=n,e.value=c().add(n,"millisecond")};let l;const i=()=>{l=setInterval(()=>{const f=e.value.diff(c(),"millisecond");f<=0?(clearInterval(l),s.value=0):s.value=f},1e3)};ee(()=>{i()}),te(()=>{clearInterval(l)});const y=q(()=>c.duration(s.value/1e3,"seconds").format("mm:ss")),E=m,D=()=>{E("resend")};return b({reset:()=>{o(),clearInterval(l),i()}}),(f,V)=>s.value?(g(),k("p",_e,S(f.$t("auth.emailVerificationDialog.resendEmailCounterText"))+" "+S(y.value),1)):(g(),z(j,{key:1,variant:d(B).text,size:d(N).medium,loading:h.isLoading,label:f.$t("common.buttons.resendX",{field:"form.email"}),class:"tw-w-full tw-mb-5",onClick:D},null,8,["variant","size","loading","label"]))}}),we={class:"de-form-input-code-container"},be=["autoFocus","data-id","value","required","disabled"],ge={__name:"DeFormInputCode",props:{fields:{type:Number,default:3},fieldWidth:{type:Number,default:56},fieldHeight:{type:Number,default:56},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!0},isError:{type:Boolean,default:!1}},emits:["change","complete"],setup(h,{expose:b,emit:m}){const n=h,c=m,s={backspace:8,delete:46,left:37,up:38,right:39,down:40},e=r([]),o=r([]),l=r([]),i=se(n,"fields"),y=r(0),E=()=>{let t;if(e.value&&e.value.length){t=[];for(let a=0;a<i.value;a++)t.push(e.value[a]||"");y.value=e.value.length>=i.value?0:e.value.length}else t=Array(i.value).fill("");o.value=[];for(let a=0;a<i.value;a++)o.value.push(a+1);e.value=t},D=t=>{t.target.select(t)},$=t=>{const a=parseInt(t.target.dataset.id);if(t.target.value=t.target.value.replace(/[^\d]/gi,""),t.target.value===""||!t.target.validity.valid)return;let x;const _=t.target.value;if(e.value=Object.assign([],e.value),_.length>1){let w=_.length+a-1;w>=i.value&&(w=i.value-1),x=o.value[w],_.split("").forEach((v,Q)=>{const F=a+Q;F<i.value&&(e.value[F]=v)})}else x=o.value[a+1],e.value[a]=_;if(x){const w=l.value[x];w.focus(),w.select()}u(e.value)},f=t=>{const a=parseInt(t.target.dataset.id),x=a-1,_=a+1,w=o.value[x],O=o.value[_];switch(t.keyCode){case s.backspace:{t.preventDefault();const v=[...e.value];e.value[a]?(v[a]="",e.value=v,u(v)):w&&(v[x]="",l.value[w].focus(),e.value=v,u(v));break}case s.delete:{t.preventDefault();const v=[...e.value];e.value[a]?(v[a]="",e.value=v,u(v)):O&&(v[_]="",l.value[O].focus(),e.value=v,u(v));break}case s.left:t.preventDefault(),w&&l.value[w].focus();break;case s.right:t.preventDefault(),O&&l.value[O].focus();break;case s.up:case s.down:t.preventDefault();break}},V=t=>{t.preventDefault();const a=t.clipboardData.getData("text");a.length===n.fields&&l.value.forEach((x,_)=>{x.value=a.charAt(_)}),e.value=[...a.split("")],u()},u=(t=e.value)=>{const a=t.join("");c("change",a),a.length>=i.value&&c("complete",a)};return b({clear:()=>{e.value=Array(i.value).fill(""),E(),l.value[1].focus()}}),E(),ne(()=>{l.value=[]}),(t,a)=>(g(),k("div",we,[(g(!0),k(L,null,le(e.value,(x,_)=>(g(),k("input",{key:_,ref_for:!0,ref:w=>{w&&(l.value[_+1]=w)},type:"tel",pattern:"[0-9]",style:oe({width:`${n.fieldWidth}px`,height:`${n.fieldHeight}px`}),class:ie(["de-form-input-text de-form-input-code",{"is-error":h.isError}]),autoFocus:_===y.value,"data-id":_,value:x,required:n.required,disabled:n.disabled,maxlength:"1",onInput:$,onFocus:D,onKeydown:f,onPaste:V},null,46,be))),128))]))}},J=R({__name:"VerificationCode",props:{isError:{type:Boolean,default:!1}},emits:["complete"],setup(h,{expose:b,emit:m}){const n=m,c=o=>{n("complete",o)},s=r(null);return b({clear:()=>{s.value&&s.value.clear()}}),(o,l)=>(g(),z(ge,{ref_key:"verificationCode",ref:s,fields:6,"field-width":40,"field-height":38,"is-error":h.isError,onComplete:c},null,8,["is-error"]))}}),he={class:"tw-w-1600 tw-h-1600 tw-bg-primary-600 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-mx-auto tw-mb-7.5"},ye={class:"heading-h2 tw-mb-4 tw-text-center"},xe={class:"tw-text-accent-500 tw-font-bold"},Ce={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},U=R({__name:"DisconnectWalletStep1",emits:["update-step"],setup(h,{emit:b}){const{t:m}=M(),n=b,c=re(),s=r(null),e=r(null),o=r(!0);function l(p){o.value=!o.value,D(p)}const i=r(!1),{confirmDisconnectWallet:y}=T(),{getErrorMessage:E}=pe();async function D(p){console.log(p),i.value=!0;try{await y(p),n("update-step","verified")}catch(t){console.error(t);const{errorCode:a}=t;s.value=E(a)}finally{i.value=!1}}const $=r(null),f=r(!1),{attemptDisconnectWallet:V}=T();async function u(){var p,t;if(e.value){f.value=!0;try{await V(),(p=$.value)==null||p.reset(),(t=e.value)==null||t.clear(),s.value=null}finally{f.value=!1}}}return(p,t)=>{const a=H("i18n-t");return g(),k(L,null,[I("div",he,[C(K,{name:"mail",class:"tw-w-800 tw-h-800 tw-text-accent-500"})]),I("p",ye,S(d(m)("user.settings.account.verifyEmailStep.title",{step:"1/2"})),1),C(a,{keypath:"user.settings.account.verifyEmailStep.text",tag:"p",class:"tw-text-center tw-text-primary-200 body-b1 tw-mb-7.5",scope:"global"},{email:W(()=>[I("span",xe,S(d(Y)(d(c).user.email||"")),1)]),_:1}),C(J,{ref_key:"verifCode",ref:e,"is-error":!!s.value,class:"tw-mb-5",onComplete:l},null,8,["is-error"]),s.value?(g(),k("div",Ce,S(s.value),1)):X("",!0),C(G,{ref_key:"resendEmailRef",ref:$,"is-loading":f.value,class:"tw-mb-5",onResend:u},null,8,["is-loading"]),C(j,{variant:d(B).confirm,size:d(N).medium,label:d(m)("common.buttons.next"),loading:i.value,disabled:o.value,class:"tw-w-full",onClick:D},null,8,["variant","size","label","loading","disabled"])],64)}}}),Ee=R({__name:"DisconnectWalletDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(h){const b=P(()=>A(()=>Promise.resolve().then(()=>ze),void 0,import.meta.url)),m=P(()=>A(()=>import("./Cpn-_-_c.js").then(l=>l.D),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),n=ce(h,"modelValue"),c=r(1),s=q(()=>{switch(c.value){case 1:return U;case"verified":return b;case 2:return m;default:return U}});function e(l){c.value=l}function o(){n.value=!1,c.value=1}return(l,i)=>(g(),z(me,{visible:n.value,"onUpdate:visible":i[0]||(i[0]=y=>n.value=y),class:"tw-w-screen max-md:tw-h-screen md:tw-w-[450px]","content-class":"max-md:tw-pt-16"},{default:W(()=>[(g(),z(ue(s.value),{onUpdateStep:e,onClose:o},null,32))]),_:1},8,["visible"]))}}),Le=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),Se={class:"heading-h2 tw-mb-4 tw-text-center"},De={class:"tw-text-accent-500 tw-font-bold"},ke={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},$e=R({__name:"SetEmailStep2",props:{email:{}},emits:["update-step"],setup(h,{emit:b}){const m=h,n=b,{t:c}=M(),s=r(null),e=r(null),o=r(!0);async function l(u){o.value=!o.value,await D(u)}const{$customFetch:i}=de(),y=fe(i),E=r(!1);async function D(u){E.value=!0;try{await y.verifyEmail(u),n("update-step",3)}catch(p){s.value=p}finally{E.value=!1}}const $=r(null),f=r(!1);async function V(){var u,p;if(e.value){f.value=!0;try{await y.connectEmail(m.email),(u=$.value)==null||u.reset(),(p=e.value)==null||p.clear(),s.value=null}finally{f.value=!1}}}return(u,p)=>{const t=H("i18n-t");return g(),k(L,null,[I("p",Se,S(d(c)("user.settings.account.verifyEmailStep.title",{step:"2/3"})),1),C(t,{keypath:"user.settings.account.verifyEmailStep.text",tag:"p",class:"tw-text-center tw-text-primary-200 body-b1 tw-mb-7.5",scope:"global"},{email:W(()=>[I("span",De,S(d(Y)(m.email||"")),1)]),_:1}),C(J,{ref_key:"verifCode",ref:e,"is-error":!!s.value,class:"tw-mb-5",onComplete:l},null,8,["is-error"]),s.value?(g(),k("div",ke,S(s.value),1)):X("",!0),C(G,{ref_key:"resendEmailRef",ref:$,"is-loading":f.value,class:"tw-mb-5",onResend:V},null,8,["is-loading"]),C(j,{variant:d(B).confirm,size:d(N).medium,label:u.$t("common.buttons.next"),loading:E.value,disabled:o.value,class:"tw-w-full",onClick:D},null,8,["variant","size","label","loading","disabled"])],64)}}}),Me=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"})),Ie={class:"tw-w-1600 tw-h-1600 tw-bg-primary-600 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-mx-auto tw-mb-7.5"},Ve={class:"heading-h2 tw-mb-4 tw-text-center"},Re={class:"body-b1 tw-text-primary-200 tw-text-center tw-mb-10"},Oe=R({__name:"DisconnectWalletStep1Verified",emits:["update-step"],setup(h,{emit:b}){const m=b,{t:n}=M();function c(){m("update-step",2)}return(s,e)=>(g(),k(L,null,[I("div",Ie,[C(K,{name:"mail-check",class:"tw-w-800 tw-h-800 tw-text-accent-500"})]),I("p",Ve,S(d(n)("user.settings.account.verifyEmailStep.successStep.title",{step:"1/2"})),1),I("p",Re,S(d(n)("user.settings.account.verifyEmailStep.successStep.text")),1),C(j,{variant:d(B).confirm,size:d(N).medium,label:d(n)("common.buttons.next"),class:"tw-w-full",onClick:c},null,8,["variant","size","label"])],64))}}),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));export{Le as D,Me as S,J as _,G as a};

import{i as z,a as B,U as V}from"./C2wCgOwX.js";import{D as j,b as F,a as A}from"./DOvt5s4i.js";import{d as v,bc as T,o as f,c as _,a as w,t as p,b as P,f as U,l as c,L as G,bd as N,g as e,aK as q,m as x,be as X,bf as H,bg as D,bm as L,bG as Y,h as I,w as y,b8 as k,a_ as M,a$ as E,a2 as K,s as S,e as O,i as W,q as J,ah as Q,F as Z,p as ee,_ as te,aT as se}from"./I0J7D7wH.js";import ae from"./DVjZi4si.js";const re={class:"de-form-input-text-label-wrapper"},oe=["for"],le={key:0,class:"de-form-error"},C=v({inheritAttrs:!1,__name:"DeFormPassword",props:{feedback:{type:Boolean,default:!1},toggleMask:{type:Boolean,default:!0},id:{type:String,required:!0},label:{type:String,default:null},placeholder:{type:String,default:null},inputClass:{type:String,default:null},isError:{type:Boolean,default:!1}},setup(a){const m=a,{errorMessage:r,value:s,handleChange:n,handleBlur:t}=T(()=>m.id,void 0,{validateOnValueUpdate:!1}),d={blur:o=>t(o,!0),input:o=>n(o,!!r.value)};return(o,u)=>{const l=ae;return f(),_("div",null,[w("div",re,[a.label?(f(),_("label",{key:0,for:a.id,class:"de-form-input-text-label"},p(a.label),9,oe)):P("",!0),U(o.$slots,"append-label")]),c(l,G(o.$attrs,{modelValue:e(s),"onUpdate:modelValue":u[0]||(u[0]=i=>q(s)?s.value=i:null),feedback:a.feedback,"toggle-mask":a.toggleMask,placeholder:a.placeholder,"input-id":a.id,"input-class":["de-form-input-text",a.inputClass,{"is-error":!!e(r)||a.isError}],pt:{root:{class:["de-input-password"]},showicon:{class:["de-form-input-password-icon"]},hideicon:{class:["de-form-input-password-icon"]}},"input-props":d},N(d)),null,16,["modelValue","feedback","toggle-mask","placeholder","input-id","input-class"]),e(r)?(f(),_("div",le,p(e(r)),1)):P("",!0)])}}}),ne={key:0,class:"tw-text-danger-500 heading-h5 tw-text-center"},R=v({__name:"ChangePasswordForm",props:{error:{},pending:{type:Boolean}},emits:["submit"],setup(a,{emit:m}){const r=m,{t:s}=x(),{handleSubmit:n,errors:t,values:d}=X({validationSchema:H({password:D().required(s("form.enterYourX",{field:"form.password"})).matches(L,s("form.rules.passwordStrengthValidation")),repeatPassword:D().required("Please repeat your password").oneOf([Y("password")],s("form.rules.passwordDoestMatch"))})}),o=I(()=>!d.password||!d.repeatPassword||!z(t.value)),u=n(l=>{r("submit",l.password,l.repeatPassword)});return(l,i)=>(f(),_("form",{onSubmit:i[0]||(i[0]=K((...b)=>e(u)&&e(u)(...b),["prevent"]))},[c(j,null,{default:y(()=>[c(C,{id:"password",placeholder:e(s)("form.enterYourX",{field:"form.password",subj:"common.new"}),label:e(s)("form.password"),"input-class":"tw-w-full"},null,8,["placeholder","label"]),c(C,{id:"repeatPassword",placeholder:e(s)("form.enterYourX",{field:"form.confirmPassword"}),label:e(s)("form.confirmPassword"),"input-class":"tw-w-full"},null,8,["placeholder","label"]),l.error?(f(),_("div",ne,p(l.error),1)):P("",!0)]),_:1}),c(E,{type:"submit",variant:e(k).confirm,size:e(M).medium,label:e(s)("auth.changePassword.submit"),loading:l.pending,disabled:o.value,class:"tw-w-full tw-mt-10"},null,8,["variant","size","label","loading","disabled"])],32))}}),ie={class:"body-b1 tw-text-primary-200 tw-mt-4"},de=v({__name:"ChangePasswordDialog",props:{hash:{}},emits:["password-saved"],setup(a,{emit:m}){const r=a,s=m,{t:n}=x(),t=S(null),{changePassword:d}=F(),{getErrorMessage:o}=A(),u=S();async function l(i,b){var g;try{await d({hash:r.hash,password:i,confirm_password:b}),s("password-saved"),(g=t.value)==null||g.close()}catch(h){console.error(h);const{errorCode:$}=h;u.value=o($)}}return(i,b)=>(f(),O(B,{ref_key:"dialog",ref:t},{header:y(({props:g})=>[w("h1",{class:W(g.class)},p(e(n)("auth.changePassword.title")),3),w("p",ie,p(e(n)("auth.changePassword.subtitle")),1)]),default:y(()=>[c(R,{error:u.value,onSubmit:l},null,8,["error"])]),_:1},512))}}),Se=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),ue={class:"heading-h2 tw-mb-4 tw-text-center"},ce={class:"tw-text-center tw-text-primary-200 body-b1 tw-mb-7.5"},me=v({__name:"SetEmailStep3",props:{email:{}},emits:["update-step"],setup(a,{emit:m}){const r=a,s=m,{t:n}=x(),{getErrorMessage:t}=A(),d=J(),o=S(),{$customFetch:u}=Q(),l=V(u),i=S(!1);async function b(g){i.value=!0;try{await l.setPassword(g),s("update-step","success"),r.email&&d.setUserEmail(r.email)}catch(h){console.error(h);const{errorCode:$}=h;o.value=t($)}finally{i.value=!1}}return(g,h)=>(f(),_(Z,null,[w("p",ue,p(e(n)("user.settings.account.setEmailAndPasswordDialog.step3.title")),1),w("p",ce,p(e(n)("user.settings.account.setEmailAndPasswordDialog.step3.text")),1),c(R,{error:o.value,pending:i.value,onSubmit:b},null,8,["error","pending"])],64))}}),ve=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),pe={class:"tw-w-16 tw-h-16 tw-bg-primary-600 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-mx-auto tw-mb-7.5"},fe={class:"heading-h2 tw-text-center tw-mb-4"},we={class:"body-b1 tw-text-primary-200 tw-text-center"},ge=v({__name:"SignupEmailAlreadyRegisteredDialog",setup(a){const m=ee(),r=S(null),s=()=>{var t;(t=r.value)==null||t.close(),m.toggleAuthDialog(se.login,!0)},n=()=>{var t;(t=r.value)==null||t.close()};return(t,d)=>(f(),O(B,{ref_key:"dialog",ref:r},{header:y(()=>[w("div",pe,[c(te,{name:"info",class:"tw-w-800 tw-h-800 tw-text-accent-500"})]),w("h1",fe,p(t.$t("auth.emailAlreadyRegisteredDialog.title")),1),w("p",we,p(t.$t("auth.emailAlreadyRegisteredDialog.text")),1)]),default:y(()=>[c(E,{size:e(M).medium,variant:e(k).confirm,label:t.$t("auth.emailAlreadyRegisteredDialog.submitButton"),class:"tw-w-full tw-mt-10",onClick:s},null,8,["size","variant","label"]),c(E,{variant:e(k).text,label:t.$t("common.buttons.goBack"),class:"tw-w-full tw-mt-5",onClick:n},null,8,["variant","label"])]),_:1},512))}}),$e=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{Se as C,ve as S,C as _,$e as a};
